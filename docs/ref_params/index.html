<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="PG-Strom Development Team" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>GUC Parameters - PG-Strom Manual</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="//fonts.googleapis.com/earlyaccess/notosansjp.css" rel="stylesheet" />
        <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" />
        <link href="../custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "GUC Parameters";
        var mkdocs_page_input_path = "ref_params.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PG-Strom Manual
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
  [<a href="../ja/ref_params/" style="color: #cccccc">Japanese</a> | <strong>English</strong>]
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorial</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../operations/">Basic Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../brin/">BRIN Index</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../partition/">Partitioning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../postgis/">PostGIS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gpusort/">GPU-Sort</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubles/">Trouble Shooting</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ssd2gpu/">GPUDirect SQL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../arrow_fdw/">Apache Arrow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gpucache/">GPU Cache</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pinned_buffer/">Pinned Inner Buffer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fluentd/">connect with Fluentd</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">References</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../ref_types/">Data Types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_devfuncs/">Functions and Operators</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_sqlfuncs/">SQL Objects</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">GUC Parameters</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#enablesdisables-a-particular-feature">Enables/disables a particular feature</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#optimizer-configuration">Optimizer Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#executor-configuration">Executor Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gpudirect-sql-configuration">GPUDirect SQL Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#arrow_fdw-configuration">Arrow_Fdw Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gpu-cache-configuration">GPU Cache configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gpu-device-configuration">GPU Device Configuration</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Release Note</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v6.0/">PG-Strom v6.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v5.2/">PG-Strom v5.2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v5.1/">PG-Strom v5.1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v5.0/">PG-Strom v5.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v3.0/">PG-Strom v3.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v2.3/">PG-Strom v2.3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v2.2/">PG-Strom v2.2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../release_v2.0/">PG-Strom v2.0</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PG-Strom Manual</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">References</li>
      <li class="breadcrumb-item active">GUC Parameters</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="guc-parameters">GUC Parameters</h1>
<p>This session introduces PG-Strom's configuration parameters.</p>
<h2 id="enablesdisables-a-particular-feature">Enables/disables a particular feature</h2>
<dl>
<dt><code>pg_strom.enabled</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables entire PG-Strom features at once</dd>
<dt><code>pg_strom.enable_gpuscan</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables GpuScan</dd>
<dt><code>pg_strom.enable_gpuhashjoin</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables JOIN by GpuHashJoin</dd>
<dt><code>pg_strom.enable_gpugistindex</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables JOIN by GpuGiSTIndex</dd>
<dt><code>pg_strom.enable_gpujoin</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables entire GpuJoin features (including GpuHashJoin and GpuGiSTIndex)</dd>
<dt><code>pg_strom.enable_gpupreagg</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables GpuPreAgg</dd>
<dt><code>pg_strom.enable_gpusort</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables GPU-Sort</dd>
<dd>Check (here)[gpusort.md] to know the detail of GPU-Sort.</dd>
<dt><code>pg_strom.enable_numeric_aggfuncs</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables support of aggregate function that takes <code>numeric</code> data type.</dd>
<dd>Note that aggregated function at GPU mapps <code>numeric</code> data type to 128bit fixed-point variable, so it raises an error if you run the aggregate functions with extremely large or highly-precise values. You can turn off this configuration to enforce the aggregate functions being operated by CPU.</dd>
<dt><code>pg_strom.enable_brin</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables BRIN index support on tables scan</dd>
<dt><code>pg_strom.cpu_fallback</code> [type: <code>enum</code> / default: <code>notice</code>]</dt>
<dd>Controls whether it actually run CPU fallback operations, if GPU program returned "CPU ReCheck Error"</dd>
<dd><code>notice</code> ... Runs CPU fallback operations with notice message</dd>
<dd><code>on</code>, <code>true</code> ... Runs CPU fallback operations with no message output</dd>
<dd><code>off</code>, <code>false</code> ... Disabled CPU fallback operations with an error</dd>
<dt><code>pg_strom.regression_test_mode</code> [type: <code>bool</code> / default: <code>off]</code></dt>
<dd>It disables some <code>EXPLAIN</code> command output that depends on software execution platform, like GPU model name. It avoid "false-positive" on the regression test, so use usually don't tough this configuration.</dd>
<dt><code>pg_strom.explain_developer_mode</code> [型: <code>bool</code> / 初期値: <code>off]</code></dt>
<dd>Among the various information displayed by EXPLAIN VERBOSE, this option displays information that is useful for developers. Since this information is cumbersome for general users and DB administrators, we recommend that you usually leave it at the default value.</dd>
</dl>
<h2 id="optimizer-configuration">Optimizer Configuration</h2>
<dl>
<dt><code>pg_strom.gpu_setup_cost</code> [type: <code>real</code> / default: <code>100 * DEFAULT_SEQ_PAGE_COST</code>]</dt>
<dd>Cost value for initialization of GPU device</dd>
<dt><code>pg_strom.gpu_tuple_cost</code> [type: <code>real</code> / default: <code>DEFAULT_CPU_TUPLE_COST</code>]</dt>
<dd>Cost value to send tuples to, or receive tuples from GPU for each.</dd>
<dt><code>pg_strom.gpu_operator_cost</code> [type: <code>real</code> / default: <code>DEFAULT_CPU_OPERATOR_COST / 16</code>]</dt>
<dd>Cost value to process an expression formula on GPU. If larger value than <code>cpu_operator_cost</code> is configured, no chance to choose PG-Strom towards any size of tables</dd>
<dt><code>pg_strom.enable_partitionwise_gpujoin</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables whether GpuJoin is pushed down to the partition children.</dd>
<dt><code>pg_strom.enable_partitionwise_gpupreagg</code> [type: <code>bool</code> / default: <code>on]</code></dt>
<dd>Enables/disables whether GpuPreAgg is pushed down to the partition children.</dd>
<dt><code>pg_strom.pinned_inner_buffer_threshold</code> [type: <code>int</code> / 初期値: <code>0</code>]</dt>
<dd>If the INNER table of GpuJoin is either GpuScan or GpuJoin, and the estimated size of its processing result is larger than this configured value, the result is retained on the GPU device without being returned to the CPU, and then reused as a part of the INNER buffer of the subsequent GpuJoin.</dd>
<dd>If the configured value is <code>0</code>, this function will be disabled.</dd>
<dt><code>pg_strom.pinned_inner_buffer_partition_size</code> [type: <code>int</code> / default: auto]</dt>
<dd>When using Pinned Inner Buffer with GPU-Join, if the buffer size exceeds the threshold specified by this parameter, it will attempt to split the buffer into multiple pieces. This parameter is automatically set to about 70% to 80% of the GPU memory, and usually does not need to be specified by the user.</dd>
<dd>Check (here)[http://buri.heterodb.in/operations/#inner-pinned-buffer-of-gpujoin] for more information.</dd>
<dt><code>pg_strom.extra_ereport_level</code> [type: <code>int</code> / default: auto]</dt>
<dd>Specifies the error level reported by the heterodb-extra module from 0 to 2.</dd>
<dd>The initial value is set by the value of the environment variable <code>HETERODB_EXTRA_EREPORT_LEVEL</code>, and if not set, it will be <code>0</code>.</dd>
</dl>
<h2 id="executor-configuration">Executor Configuration</h2>
<dl>
<dt><code>pg_strom.max_async_tasks</code> [type: <code>int</code> / default: <code>12</code>]</dt>
<dd>Max number of asynchronous taks PG-Strom can submit to the GPU execution queue, and is also the number of GPU Service worker threads.</dd>
</dl>
<h2 id="gpudirect-sql-configuration">GPUDirect SQL Configuration</h2>
<dl>
<dt><code>pg_strom.gpudirect_driver</code> [type: <code>text</code>]</dt>
<dd>It shows the driver software name of GPUDirect SQL (read-only).</dd>
<dd>Either <code>cufile</code>, <code>nvme-strom</code> or <code>vfs</code></dd>
<dt><code>pg_strom.gpudirect_enabled</code> [type: <code>bool</code> / default: <code>on</code>]</dt>
<dd>Enables/disables GPUDirect SQL feature.</dd>
<dt><code>pg_strom.gpu_direct_seq_page_cost</code> [type: <code>real</code> / default: <code>DEFAULT_SEQ_PAGE_COST / 4</code>]</dt>
<dd>The cost of scanning a table using GPU-Direct SQL, instead of the <code>seq_page_cost</code>, when the optimizer calculates the cost of an execution plan.</dd>
<dt><code>pg_strom.gpudirect_threshold</code> [type: <code>int</code> / default: auto]</dt>
<dd>Controls the table-size threshold to invoke GPUDirect SQL feature.</dd>
<dd>The default is auto configuration; a threshold calculated by the system physical memory size and <code>shared_buffers</code> configuration.</dd>
<dt><code>pg_strom.manual_optimal_gpus</code> [type: <code>text</code> / default: none]</dt>
<dd>It manually configures the closest GPU for the target storage volumn, like NVME device or NFS volume.</dd>
<dd>Its format string is: <code>{&lt;nvmeX&gt;|/path/to/tablespace}=gpuX[:gpuX...]</code>. It describes relationship between the closest GPU and NVME device or tablespace directory path. It accepts multiple configurations separated by comma character.</dd>
<dd>Example: <code>pg_strom.manual_optimal_gpus = 'nvme1=gpu0,nvme2=gpu1,/mnt/nfsroot=gpu0'</code></dd>
<dd>
<ul>
<li><code>&lt;gpuX&gt;</code> means a GPU with device identifier X.</li>
</ul>
</dd>
<dd>
<ul>
<li><code>&lt;nvmeX&gt;</code> means a local NVME-SSD or a remote NVME-oF device.</li>
</ul>
</dd>
<dd>
<ul>
<li><code>/path/to/tablespace</code> means full-path of the tablespace directory.</li>
</ul>
</dd>
<dd>
<p>Automatic configuration is often sufficient for local NVME-SSD drives, however, you should manually configure the closest GPU for NVME-oF or NFS-over-RDMA volumes.</p>
</dd>
</dl>
<h2 id="arrow_fdw-configuration">Arrow_Fdw Configuration</h2>
<dl>
<dt><code>arrow_fdw.enabled</code> [type: <code>bool</code> / default: <code>on</code>]</dt>
<dd>By adjustment of estimated cost value, it turns on/off Arrow_Fdw. Note that only Foreign Scan (Arrow_Fdw) can scan on Arrow files, if GpuScan is not capable to run on.</dd>
<dt><code>arrow_fdw.stats_hint_enabled</code> [type: <code>bool</code> / default: <code>on</code>]</dt>
<dd>When Arrow file has min/max statistics, this parameter controls whether unnecessary record-batches shall be skipped, or not.</dd>
<dt><code>arrow_fdw.metadata_cache_size</code> [type: <code>int</code> / default: <code>512MB</code>]</dt>
<dd>Size of shared memory to cache metadata of Arrow files.</dd>
<dd>Once consumption of the shared memory exceeds this value, the older metadata shall be released based on LRU.</dd>
</dl>
<h2 id="gpu-cache-configuration">GPU Cache configuration</h2>
<dl>
<dt><code>pg_strom.enable_gpucache</code> [type: <code>bool</code> / default: <code>on</code>]</dt>
<dd>Controls whether search/analytic query tries to use GPU Cache.</dd>
<dd>Note that GPU Cache trigger functions continue to update the REDO Log buffer, even if this parameter is turned off.</dd>
<dt><code>pg_strom.gpucache_auto_preload</code> [type: <code>text</code> / default: <code>null</code>]</dt>
<dd>It specifies the table names to be loaded onto GPU Cache just after PostgreSQL startup.</dd>
<dd>Its format is <code>DATABASE_NAME.SCHEMA_NAME.TABLE_NAME</code>, and separated by comma if multiple tables are preloaded.</dd>
<dd>Initial-loading of GPU Cache usually takes a lot of time. So, preloading enables to avoid delay of response time of search/analytic queries on the first time.</dd>
<dd>If this parameter is '*', PG-Strom tries to load all the configured tables onto GPU Cache sequentially.</dd>
</dl>
<h2 id="gpu-device-configuration">GPU Device Configuration</h2>
<dl>
<dt><code>pg_strom.gpu_mempool_segment_sz</code> [type: <code>int</code> / default: <code>1GB</code>]</dt>
<dd>The segment size when GPU Service allocates GPU device memory for the memory pool.</dd>
<dd>GPU device memory allocation is a relatively heavy process, so it is recommended to use memory pools to reuse memory.</dd>
<dt><code>pg_strom.gpu_mempool_max_ratio</code> [type: <code>real</code> / default: <code>50%</code>]</dt>
<dd>It specifies the percentage of device memory that can be used for the GPU device memory memory pool.</dd>
<dd>It works to suppress excessive GPU device memory consumption by the memory pool and ensure sufficient working memory.</dd>
<dt><code>pg_strom.gpu_mempool_min_ratio</code> [type: <code>real</code> / default: <code>5%</code>]</dt>
<dd>It specify the percentage of GPU device memory that is preserved as the memory pool segment, and remained even after memory usage.</dd>
<dd>By maintaining a minimum memory pool, the next query can be executed quickly.</dd>
<dt><code>pg_strom.gpu_mempool_release_delay</code> [type: <code>int</code> / default: <code>5000</code>]</dt>
<dd>GPU Service does not release a segment of a memory pool immediately, even if it becomes empty. When the time specified by this parameter (in milliseconds) has elapsed since the segment was last used, it is released and returned to the system.</dd>
<dd>By inserting a certain delay, you can reduce the frequency of GPU device memory allocation/release.</dd>
<dt><code>pg_strom.cuda_toolkit_basedir</code> [type: <code>text</code> / default: <code>/usr/local/cuda</code>]</dt>
<dd>PG-Strom uses the CUDA Toolkit to build GPU code on its start-up. Specify the installation path of the CUDA Toolkit to be used at that time. Normally, the CUDA toolkit is installed under <code>/usr/local/cuda</code>, but if you want to use a different directory, you can change the setting with this parameter.</dd>
<dt><code>pg_strom.cuda_stack_limit</code> [type: <code>int</code> / default: <code>32</code>]</dt>
<dd>When PG-Strom executes SQL workloads on the GPU, it automatically configures the size of the stack space used by GPU threads depending on the complexity of the processing. For example, it allocates a relatively large stack for PostGIS functions or expressions that include recursive calls.</dd>
<dd>This parameter specifies the upper limit in kB in that case.</dd>
<dt><code>pg_strom.cuda_visible_devices</code> [type: <code>text</code> / default: <code>null</code>]</dt>
<dd>List of GPU device numbers in comma separated, if you want to recognize particular GPUs on PostgreSQL startup.</dd>
<dd>It is equivalent to the environment variable <code>CUDAVISIBLE_DEVICES</code></dd>
</dl>
<!--
## DPU related configurations
















-->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ref_sqlfuncs/" class="btn btn-neutral float-left" title="SQL Objects"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../release_v6.0/" class="btn btn-neutral float-right" title="PG-Strom v6.0">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ref_sqlfuncs/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../release_v6.0/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
